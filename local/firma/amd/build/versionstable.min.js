define(["core/modal_factory","core/modal_events","core/notification"],function(a,b,c){return{init:function(d){const e=document.querySelectorAll("[data-firma-preview]");if(!e.length)return;let f=null;const g=()=>(f||(f=a.create({type:a.types.CANCEL,title:d.title||""}).then(a=>(a.getRoot().on(b.hidden,()=>{a.setBody("")}),a))),f);e.forEach(a=>{a.addEventListener("click",a=>{a.preventDefault();const b=a.target.getAttribute("data-firma-preview");b&&g().then(a=>{a.setTitle(d.title||""),a.setBody(`<div class="local-firma-preview-frame"><iframe src="${b}" title="${d.title}" frameborder="0"></iframe></div>`),a.show()}).catch(c.exception)})})}}});
